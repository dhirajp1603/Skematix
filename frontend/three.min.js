/*! For license information please see three.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).THREE=t()}(this,function(){var e={};function t(n){var i=e[n];if(void 0!==i)return i.exports;var r=e[n]={exports:{}};return {}.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return r.exports}}),r}var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function i(){let e=n.navigator?.userAgent;return void 0===e&&(e=""),e}let r=!1;function o(){if(r)return;r=!0;const e=i();-1!==e.indexOf("Firefox")&&(n.__THREE__FORCE_WEBGL_1__=!0)}function a(){const e=i();return-1!==e.indexOf("Chrome")?parseInt(e.split("Chrome")[1].split(" ")[0]):1/0}function s(){const e=i();return-1!==e.indexOf("Safari")&&-1===e.indexOf("Chrome")?parseInt(e.split("Version/")[1].split(" ")[0]):0}function c(){const e=i();return-1!==e.indexOf("Mobile")}const u={};const l=new WeakMap;function d(e){if(void 0===u[e.uuid]){const t={};l.set(e,t),u[e.uuid]=t}}function h(e){return l.get(e)}const f=new WeakMap;let m=0;function p(){return f.size>m?(m=f.size,!0):!1}const g=new WeakMap,_=new WeakMap;const v=[],M=[],T=[];const E={},x={};for(let e=0;e<8;e++)E[e]=new Float32Array(4);for(let e=0;e<4;e++)x[e]=new Float32Array(2);let A,S,w,b=!1,C=!1,y=!1;function L(e,t){this.index=e,this.active=!0,this.workingIndex=0,this.frames=t,this.frameValue=0,this.startFrame=0,this.endFrame=t-1,this.playing=!1,this.timeScale=1,this.time=0,this.duration=(t-1)/30}let O,D,P,R;const F=typeof SharedArrayBuffer<"u"&&new SharedArrayBuffer(1);function I(e){this.index=e,this.frame=0,this.position=new Float32Array(1),this.orientation=new Float32Array(3)}const G=class{constructor(e){this.name="",this.active=!0,this.time=0,this.loopCount=0,this.sigml=null,this.bmlSchedules=[],this.container=null,this.fps=30,this.loop=!0,this.clamp=!1,this.fadeIn=0,this.fadeOut=0,this.paused=!1,this.weight=1,this.timeScale=1,this.syncTracks=[],this.animations=[],this.tracks=[],this.reset(),this.init(e)}init(e){void 0!==e&&(this.sigml=e,this.load(e))}reset(){this.time=0,this.loopCount=0}load(e){this.sigml=e}update(e){if(!this.active||this.paused)return;const t=1/this.fps;this.time+=e*this.timeScale,this.loop?(this.time>=(this.fps-1)*t&&(this.time=0,this.loopCount++),this.clamp&&(this.time=Math.min(this.time,(this.fps-1)*t))):this.time=Math.min(this.time,(this.fps-1)*t);const n=[];for(let e=0;e<this.tracks.length;e++){const i=this.tracks[e];i.update(this.time,this.fps,this.weight,n)}return n}getFrameTime(){return this.time*this.fps}};function B(e){return e instanceof G}const N={Play:1,Stop:2,Pause:3,TimeScale:4};class U{constructor(e,t,n){this.controllers=[],this.animations=[],this.baseAnimation=null,this.totalWeight=0,this.fps=30,this.paused=!1,this.container=e,this.target=t,this.assetVersion=n,this.tracks={},this.hierarchy={},this.skeletal={},this.joint={}}reset(){for(let e=0;e<this.controllers.length;e++)this.controllers[e].reset()}play(e){for(let t=0;t<this.controllers.length;t++)this.controllers[t].playing=!0}stop(){for(let e=0;e<this.controllers.length;e++)this.controllers[e].playing=!1}pause(){this.paused=!this.paused}getBaseAnimationTime(){return this.baseAnimation?this.baseAnimation.time:0}update(e){if(this.paused)return;for(let t=0;t<this.controllers.length;t++){const n=this.controllers[t];if(n.playing){const i=n.update(e);for(let e=0;e<i.length;e++){const r=i[e],o=this.target.getObjectByProperty("uuid",r.uuid);if(o){const e=r.track.getVec3();o.position.copy(e)}}}}}addAnimation(e){B(e)&&(this.animations.push(e),this.baseAnimation||(this.baseAnimation=e),this.controllers.push(new L(this.controllers.length,e.frames)))}removeAnimation(e){const t=this.animations.indexOf(e);-1!==t&&(this.animations.splice(t,1),this.baseAnimation===e&&(this.baseAnimation=this.animations.length>0?this.animations[0]:null))}getAnimations(){return this.animations}isAnimating(){for(let e=0;e<this.controllers.length;e++)if(this.controllers[e].playing)return!0;return!1}}const V=new WeakMap;const H=new WeakMap;const j=new WeakMap;const K=new WeakMap;const z=new WeakMap;const W={};class q{constructor(e={},t){this.name="",this.layers={base:null},this.fog=null,this.environment=null,this.background=null,this.target=e.target||{position:{x:0,y:0,z:0}},this.position=e.position||{x:0,y:0,z:0},this.rotation=e.rotation||{x:0,y:0,z:0},this.quaternion=e.quaternion||{x:0,y:0,z:0,w:1},this.up=e.up||{x:0,y:1,z:0},this.scale=e.scale||{x:1,y:1,z:1},this.projectionMatrix=null,this.viewMatrix=null,this.width=t?.width||window.innerWidth,this.height=t?.height||window.innerHeight,this.near=e.near||.1,this.near=e.far||1e3,this.fov=e.fov||45,this.aspect=this.width/this.height}updateMatrices(){}}const $=class{constructor(e,t){this.container=e,this.config=t||{},this.renderer=null,this.scene=null,this.camera=null,this.controls=null,this.mixer=null,this.actions=[],this.clock=new Date}init(){}render(){this.renderer?.render(this.scene,this.camera)}update(e){this.mixer?.update(e)}};function Y(e){const t={};for(const n of e.entries()){const e=n[0];t[e.name]=n[1]}return t}class X{constructor(e){this.lights=[],this.assets={},this.renderers={},this.layers={},this.fog=null,this.environment=null,this.config=e||{},this.width=e?.width||window.innerWidth,this.height=e?.height||window.innerHeight}addLight(e){this.lights.push(e)}addAsset(e,t){this.assets[e]=t}addRenderer(e,t){this.renderers[e]=t}getLights(){return this.lights}getAssets(){return this.assets}getRenderers(){return this.renderers}}const Z=new X({});function Q(e,t){Z.addRenderer(e,t)}function J(e,t){Z.addAsset(e,t)}const _t={Idle:0,Playing:1,Stopped:2,Paused:3};class et{constructor(e){this.type=_t.Idle,this.mixer=e,this.actions=new Map,this.clips=new Map,this.track=null,this.playing=!1}addClip(e){const t=e.name||e.uuid;this.clips.set(t,e)}getClip(e){return this.clips.get(e)}playClip(e){if(!this.clips.has(e))return void console.warn(`Clip "${e}" not found`);const t=this.clips.get(e);if(this.actions.has(e))this.actions.get(e).play();else{const n=this.mixer.clipAction(t);n.play(),this.actions.set(e,n)}}stopClip(e){if(this.actions.has(e)){const t=this.actions.get(e);t.stop()}}getClips(){return Array.from(this.clips.values())}isPlaying(){return this.playing||Array.from(this.actions.values()).some(e=>e.isRunning())}}const tt=new WeakMap;const nt={};function it(){return Math.random()*Math.pow(2,53)}function rt(e){return"object"==typeof e&&null!==e&&void 0!==e.id&&void 0!==e.bv}const ot=class{constructor(e){this.uuid=it(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=new Vector3(0,1,0),this.position=new Vector3,this.rotation=new Euler,this.quaternion=new Quaternion,this.scale=new Vector3(1,1,1),this.modelViewMatrix=new Matrix4,this.normalMatrix=new Matrix3,this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={},this.customDepthMaterial=null,this.customDistanceMaterial=null,this.isObject3D=!0,this._parentID=-1,this._localID=null,this._worldID=0}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.multiplyQuaternions(e,this.quaternion),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnWorldAxis(e,t){const n=new Quaternion;return n.setFromAxisAngle(e,t),this.quaternion.multiplyQuaternions(n,this.quaternion),this}rotateOnAxis(e,t){const n=new Quaternion;return n.setFromAxisAngle(e,t),this.quaternion.multiplyQuaternions(this.quaternion,n),this}rotateX(e){return this.rotateOnAxis(new Vector3(1,0,0),e)}rotateY(e){return this.rotateOnAxis(new Vector3(0,1,0),e)}rotateZ(e){return this.rotateOnAxis(new Vector3(0,0,1),e)}translateOnWorldAxis(e,t){const n=new Vector3;return n.copy(e).applyQuaternion(this.quaternion),this.position.addScaledVector(n,t),this}translate(e,t){return this.position.addScaledVector(new Vector3(e,0,0).applyQuaternion(this.quaternion),t)}translateX(e){return this.translateOnWorldAxis(new Vector3(1,0,0),e)}translateY(e){return this.translateOnWorldAxis(new Vector3(0,1,0),e)}translateZ(e){return this.translateOnWorldAxis(new Vector3(0,0,1),e)}localToWorld(e){const t=this.matrixWorld;return e.applyMatrix4(t)}worldToLocal(e){const t=new Matrix4;return t.copy(this.matrixWorld).invert(),e.applyMatrix4(t)}lookAt(e,t,n){e instanceof Vector3?this.lookAt_v3(e):this.lookAt_v3(new Vector3(e,t,n))}lookAt_v3(e){const t=new Vector3,n=new Vector3,i=new Vector3;i.copy(e).sub(this.position),i.length()>0&&this.quaternion.setFromUnitVectors(new Vector3(0,0,1),i.normalize())}add(...e){for(let t=0;t<e.length;t++){const n=e[t];n===this?console.error("Object3D.add: object can't be added as a child of itself",n):(this.children.includes(n)||(n.parent&&n.parent.remove(n),n.parent=this,this.children.push(n)),n.dispatchEvent({type:"added"}))}return this}remove(...e){for(let t=0;t<e.length;t++){const n=e[t],i=this.children.indexOf(n);-1!==i&&(n.parent=null,this.children.splice(i,1),n.dispatchEvent({type:"removed"}))}return this}removeFromParent(){return this.parent?.remove(this),this}clear(){for(let e=this.children.length-1;e>=0;e--)this.remove(this.children[e]);return this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){for(const n of this.children)if(n[e]===t)return n;for(const i of this.children){const n=i.getObjectByProperty(e,t);if(n)return n}return null}getObjectsByProperty(e,t){const n=[];!function e(i){i[arguments[1]]===arguments[2]&&n.push(i);for(let r=0;r<i.children.length;r++)e(i.children[r],arguments[1],arguments[2])}(this,e,t);return n}getWorldPosition(e){return void 0===e&&(e=new Vector3),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return void 0===e&&(e=new Quaternion),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(new Vector3,e,new Vector3),e}getWorldScale(e){return void 0===e&&(e=new Vector3),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(new Vector3,new Quaternion,e)}getWorldDirection(e){return void 0===e&&(e=new Vector3),this.getWorldQuaternion(new Quaternion).multiplyVector3(e.set(0,0,1))}raycast(){}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e=!1){this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(let t=0;t<this.children.length;t++)this.children[t].updateMatrixWorld(e)}}},at=t(4),st=t(5),ct=t(6),ut=t(7),lt=t(8),dt=t(9),ht=t(10),ft=t(11),mt=t(12),pt=t(13),gt=t(14),_t=t(15),vt=t(16),Mt=t(17),Tt=t(18),Et=t(19),xt=t(20),At=t(21),St=t(22),wt=t(23),bt=t(24),Ct=t(25),yt=t(26),Lt=t(27),Ot=t(28),Dt=t(29),Pt=t(30),Rt=t(31);return class THREE{static Vector2=at.Vector2;static Vector3=at.Vector3;static Vector4=at.Vector4;static Color=st.Color;static Matrix3=ct.Matrix3;static Matrix4=ut.Matrix4;static Quaternion=lt.Quaternion;static Euler=dt.Euler;static Layers=ht.Layers;static Object3D=ot;static Mesh=ft.Mesh;static Group=mt.Group;static Sprite=pt.Sprite;static PerspectiveCamera=gt.PerspectiveCamera;static OrthographicCamera=_t.OrthographicCamera;static WebGLRenderer=vt.WebGLRenderer;static WebGLRenderTarget=Mt.WebGLRenderTarget;static Scene=Tt.Scene;static Fog=Et.Fog;static FogExp2=xt.FogExp2;static Light=At.Light;static AmbientLight=St.AmbientLight;static DirectionalLight=wt.DirectionalLight;static PointLight=bt.PointLight;static SpotLight=Ct.SpotLight;static HemisphereLight=yt.HemisphereLight;static Material=Lt.Material;static MeshBasicMaterial=Ot.MeshBasicMaterial;static MeshLambertMaterial=Dt.MeshLambertMaterial;static MeshPhongMaterial=Pt.MeshPhongMaterial;static MeshStandardMaterial=Rt.MeshStandardMaterial;static GLTFLoader=class{load(){}};}});
